---
apiVersion: tekton.dev/v1
kind: Pipeline
metadata:
  labels:
    name: task-opc
  name: task-opc
spec:
  workspaces:
    - name: kubeconfig_dir
      optional: true

  params:
    - name: SCRIPT
      type: string
      default: "opc $@"
    - name: ARGS
      type: array
      default: ["--help"]

  tasks:
    - name: task-opc
      taskRef:
        name: task-opc
      workspaces:
        - name: kubeconfig_dir
          workspace: kubeconfig_dir
      params:
        - name: OPC_IMAGE
          value: "quay.io/redhat-user-workloads/tekton-ecosystem-tenant/ecosystem-images/opc-ecosystem-images@sha256:97ba3f5cb6d20609de1133ea6e176884f103222b59fa8155190d3b95e7f5f43a"   
        - name: SCRIPT
          value: "$(params.SCRIPT)"
        - name: ARGS
          value: "$(params.ARGS)"
        
    